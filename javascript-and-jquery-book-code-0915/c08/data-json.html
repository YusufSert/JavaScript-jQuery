<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>
      JavaScript &amp; jQuery - Chapter 8: Ajax &amp; JSON - Loading JSON
    </title>
    <link rel="stylesheet" href="css/c08.css" />
  </head>
  <body>
    <header><h1>THE MAKER BUS</h1></header>
    <h2>The bus stops here.</h2>
    <section id="content"></section>

    <!-- <script src="js/data-json.js"></script> -->

    <script>
      var xhr = new XMLHttpRequest();

      xhr.onload = function () {
        if (xhr.status === 200) {
          responseObject = JSON.parse(xhr.responseText);

          var newContent = "";
          for (var i = 0; i < responseObject.events.length; i++) {
            newContent += '<div class="event">';
            newContent += '<img src="' + responseObject.events[i].map + '" ';
            newContent += 'alt="' + responseObject.events[i].location + '" />';
            newContent +=
              "<p><b>" + responseObject.events[i].location + "</b><br>";
            newContent += responseObject.events[i].date + "</p>";
            newContent += "</div>";
          }

          //$("#content").html(newContent);
          document.getElementById("content").innerHTML = newContent;
        }
      };
      xhr.open("GET", "data/data.json", true);
      xhr.send(null);
    </script>
  </body>
</html>
